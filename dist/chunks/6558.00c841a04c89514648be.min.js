"use strict";(self.webpackChunk_patternslib_patterns_dist=self.webpackChunk_patternslib_patterns_dist||[]).push([[6558,3225],{86558:function(t,e,r){r.r(e);var a=r(19755),s=r.n(a),n=r(11191),i=r(82799),o=r(50033),c=r(11815),p=new i.Z("shopping-cart");p.add_argument("action"),p.add_argument("id"),p.add_argument("contents"),p.add_argument("patterns"),e.default=n.Z.extend({name:"shopping-cart",trigger:".pat-shopping-cart",storage:c.Z.local("pat-shopping-cart"),init:function(t,e){var r=p.parse(t,e);"checkbox"==t.attr("type")?t.bind("change",s().proxy((function(){"id"in r&&(this.isAddedToCart(r)?this.removeFromCart(t,r):this.addToCart(t,r))}),this)):t.bind("click",s().proxy((function(){"action"in r?"empty"==r.action?this.emptyCart():this.processCart(t,r):"id"in r&&(this.isAddedToCart(r)?this.removeFromCart(t,r):this.addToCart(t,r))}),this)),"action"in r&&(this.cartIsEmpty()?(t.addClass("is-empty"),t.attr("disabled","disabled")):t.addClass("has-items")),"id"in r&&this.isAddedToCart(r)&&(t.addClass("in-cart"),"checkbox"==t.attr("type")&&(t.attr("checked","checked"),t.parentsUntil("lable").each((function(t,e){s()(e).removeClass("unchecked").addClass("checked")})))),"contents"in r&&"keep"==r.contents.toLowerCase()?r.keep=!0:r.keep=!1,"patterns"in r||(r.patterns="")},addToCart:function(t,e){var r=this.storage.get("cart");null===r?(this.storage.set("cart",[e.id]),s()(".pat-shopping-cart.is-empty").each((function(){s()(this).removeClass("is-empty").addClass("has-items"),s()(this).removeAttr("disabled")}))):(r.push(e.id),this.storage.set("cart",r)),t.addClass("in-cart")},removeFromCart:function(t,e){var r=this.storage.get("cart");if(t.removeClass("in-cart"),1===r.length)this.emptyCart();else{var a=r.indexOf(e.id);r.splice(a,1),this.storage.set("cart",r)}},isAddedToCart:function(t){var e=this.storage.get("cart");return null!==e&&e.indexOf(t.id)>-1},emptyCart:function(){s()(".pat-shopping-cart.has-items").each((function(){s()(this).removeClass("has-items"),s()(this).addClass("is-empty")}));for(var t=s()(".pat-shopping-cart.in-cart"),e=0;e<t.length;e++){var r=s()(t[e]),a=p.parse(r,r.data());this.removeFromCart(r,a),"checkbox"==r.attr("type")&&r.prop("checked",!1).trigger("change")}this.storage.remove("cart")},cartIsEmpty:function(){return null===this.storage.get("cart")},processCart:function(t,e){var r=this.storage.get("cart"),a=e.patterns.split(" "),n="";e.keep||this.emptyCart();for(var i=0;i<a.length;i++){var c="pat-shopping-cart-"+a[i].replace("pat-",""),p=t.data(c);n+="data-"+a[i]+'="'+p+'"'}var d=s()('<form action="'+e.action+'" class="'+e.patterns+'" '+n+' method="post"><input name="shopping-cart" type="hidden" value="'+r+'"/></form>');o.Z.scan(d),s()("body").append(d),d.submit()}})},11815:function(t,e,r){var a=r(7424).Z.getLogger("Patternslib Store");function s(t,e){this.prefix=e,this.backend=t}function n(t,e){this.store=t,this.name=e}s.prototype._key=function(t){return this.prefix+":"+t},s.prototype._allKeys=function(){var t,e,r=[],a=this.prefix+":",s=a.length;for(e=0;e<this.backend.length;e++)(t=this.backend.key(e)).slice(0,s)===a&&r.push(t);return r},s.prototype.get=function(t){var e=this._key(t),r=this.backend.getItem(e);if(null!==r)try{r=JSON.parse(r)}catch(t){return void a.warn("Cannot parse storage value for key ".concat(e))}return r},s.prototype.set=function(t,e){var r=this._key(t);return this.backend.setItem(r,JSON.stringify(e))},s.prototype.remove=function(t){var e=this._key(t);return this.backend.removeItem(e)},s.prototype.clear=function(){for(var t=this._allKeys(),e=0;e<t.length;e++)this.backend.removeItem(t[e])},s.prototype.all=function(){for(var t=this._allKeys(),e=this.prefix.length+1,r={},a=0;a<t.length;a++)r[t[a].slice(e)]=JSON.parse(this.backend.getItem(t[a]));return r},n.prototype.get=function(){return this.store.get(this.name)},n.prototype.set=function(t){return this.store.set(this.name,t)},n.prototype.remove=function(){return this.store.remove(this.name)};var i={supported:!1,local:function(t){return new s(window.localStorage,t)},session:function(t){return new s(window.sessionStorage,t)},ValueStorage:n,updateOptions:function(t,e){return"none"!==e.store&&(t.id?i.supported||(a.warn("state persistance requested, but browser does not support webstorage"),e.store="none"):(a.warn("state persistance requested, but element has no id"),e.store="none")),e}};try{i.supported=void 0!==window.sessionStorage}catch(t){}e.Z=i}}]);
//# sourceMappingURL=6558.00c841a04c89514648be.min.js.map