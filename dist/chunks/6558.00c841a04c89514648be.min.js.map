{"version":3,"file":"chunks/6558.00c841a04c89514648be.min.js","mappings":"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","sources":["webpack://@patternslib/patterns-dist/./node_modules/@patternslib/pat-shopping-cart/src/pat-shopping-cart.js","webpack://@patternslib/patterns-dist/./node_modules/@patternslib/patternslib/src/core/store.js"],"sourcesContent":["import $ from \"jquery\";\nimport Base from \"@patternslib/patternslib/src/core/base\";\nimport Parser from \"@patternslib/patternslib/src/core/parser\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport store from \"@patternslib/patternslib/src/core/store\";\n\nconst parser = new Parser(\"shopping-cart\");\nparser.add_argument(\"action\");\nparser.add_argument(\"id\");\nparser.add_argument(\"contents\");\nparser.add_argument(\"patterns\");\n\nexport default Base.extend({\n    name: \"shopping-cart\",\n    trigger: \".pat-shopping-cart\",\n    storage: store.local(\"pat-shopping-cart\"),\n\n    init: function ($el, opts) {\n        var options = parser.parse($el, opts);\n        if ($el.attr(\"type\") == \"checkbox\") {\n            $el.bind(\n                \"change\",\n                $.proxy(function () {\n                    if (\"id\" in options) {\n                        if (this.isAddedToCart(options)) {\n                            this.removeFromCart($el, options);\n                        } else this.addToCart($el, options);\n                    }\n                }, this)\n            );\n        } else {\n            $el.bind(\n                \"click\",\n                $.proxy(function () {\n                    if (\"action\" in options) {\n                        if (options.action == \"empty\") {\n                            this.emptyCart();\n                        } else this.processCart($el, options);\n                    } else if (\"id\" in options) {\n                        if (this.isAddedToCart(options)) {\n                            this.removeFromCart($el, options);\n                        } else this.addToCart($el, options);\n                    }\n                }, this)\n            );\n        }\n\n        if (\"action\" in options) {\n            if (this.cartIsEmpty()) {\n                $el.addClass(\"is-empty\");\n                $el.attr(\"disabled\", \"disabled\");\n            } else {\n                $el.addClass(\"has-items\");\n            }\n        }\n        if (\"id\" in options && this.isAddedToCart(options)) {\n            $el.addClass(\"in-cart\");\n            if ($el.attr(\"type\") == \"checkbox\") {\n                $el.attr(\"checked\", \"checked\");\n                $el.parentsUntil(\"lable\").each(function (index, elem) {\n                    $(elem).removeClass(\"unchecked\").addClass(\"checked\");\n                });\n            }\n        }\n        if (\"contents\" in options && options.contents.toLowerCase() == \"keep\") {\n            options.keep = true;\n        } else options.keep = false;\n        if (!(\"patterns\" in options)) options.patterns = \"\";\n    },\n\n    addToCart: function ($el, options) {\n        var cart = this.storage.get(\"cart\");\n        if (cart === null) {\n            this.storage.set(\"cart\", [options.id]);\n            $(\".pat-shopping-cart.is-empty\").each(function () {\n                $(this).removeClass(\"is-empty\").addClass(\"has-items\");\n                $(this).removeAttr(\"disabled\");\n            });\n        } else {\n            cart.push(options.id);\n            this.storage.set(\"cart\", cart);\n        }\n        $el.addClass(\"in-cart\");\n    },\n\n    removeFromCart: function ($el, options) {\n        var cart = this.storage.get(\"cart\");\n        $el.removeClass(\"in-cart\");\n        if (cart.length === 1) {\n            this.emptyCart();\n        } else {\n            var itemIndex = cart.indexOf(options.id);\n            cart.splice(itemIndex, 1);\n            this.storage.set(\"cart\", cart);\n        }\n    },\n\n    isAddedToCart: function (options) {\n        var cart = this.storage.get(\"cart\");\n        if (cart === null) {\n            return false;\n        } else if (cart.indexOf(options.id) > -1) {\n            return true;\n        } else return false;\n    },\n\n    emptyCart: function () {\n        $(\".pat-shopping-cart.has-items\").each(function () {\n            $(this).removeClass(\"has-items\");\n            $(this).addClass(\"is-empty\");\n        });\n        var cartItems = $(\".pat-shopping-cart.in-cart\");\n        for (var i = 0; i < cartItems.length; i++) {\n            var item = $(cartItems[i]);\n            var opts = parser.parse(item, item.data());\n            this.removeFromCart(item, opts);\n            if (item.attr(\"type\") == \"checkbox\") {\n                item.prop(\"checked\", false).trigger(\"change\");\n            }\n        }\n\n        this.storage.remove(\"cart\");\n    },\n\n    cartIsEmpty: function () {\n        return this.storage.get(\"cart\") === null;\n    },\n\n    processCart: function ($el, options) {\n        var cart = this.storage.get(\"cart\");\n        var patternsList = options.patterns.split(\" \");\n        var patternsDataStr = \"\";\n\n        if (!options.keep) this.emptyCart();\n\n        for (var i = 0; i < patternsList.length; i++) {\n            var patternDataId =\n                \"pat-shopping-cart-\" + patternsList[i].replace(\"pat-\", \"\");\n            var patternData = $el.data(patternDataId);\n            patternsDataStr += \"data-\" + patternsList[i] + \"=\" + '\"' + patternData + '\"';\n        }\n\n        var form = $(\n            '<form action=\"' +\n                options.action +\n                '\" class=\"' +\n                options.patterns +\n                '\" ' +\n                patternsDataStr +\n                ' method=\"post\">' +\n                '<input name=\"shopping-cart\" type=\"hidden\" value=\"' +\n                cart +\n                '\"/>' +\n                \"</form>\"\n        );\n\n        registry.scan(form);\n        $(\"body\").append(form);\n        form.submit();\n    },\n});\n","/**\n * Patterns store - store pattern state locally in the browser\n *\n * Copyright 2008-2012 Simplon B.V.\n * Copyright 2011 Humberto Serme√±o\n * Copyright 2011 Florian Friesdorf\n */\nimport logging from \"./logging\";\n\nconst log = logging.getLogger(\"Patternslib Store\");\n\nfunction Storage(backend, prefix) {\n    this.prefix = prefix;\n    this.backend = backend;\n}\n\nStorage.prototype._key = function Storage_key(name) {\n    return this.prefix + \":\" + name;\n};\n\nStorage.prototype._allKeys = function Storage_allKeys() {\n    var keys = [],\n        prefix = this.prefix + \":\",\n        prefix_length = prefix.length,\n        key,\n        i;\n\n    for (i = 0; i < this.backend.length; i++) {\n        key = this.backend.key(i);\n        if (key.slice(0, prefix_length) === prefix) keys.push(key);\n    }\n    return keys;\n};\n\nStorage.prototype.get = function Storage_get(name) {\n    var key = this._key(name),\n        value = this.backend.getItem(key);\n    if (value !== null) {\n        try {\n            value = JSON.parse(value);\n        } catch {\n            log.warn(`Cannot parse storage value for key ${key}`);\n            return;\n        }\n    }\n    return value;\n};\n\nStorage.prototype.set = function Storage_set(name, value) {\n    var key = this._key(name);\n    return this.backend.setItem(key, JSON.stringify(value));\n};\n\nStorage.prototype.remove = function Storage_remove(name) {\n    var key = this._key(name);\n    return this.backend.removeItem(key);\n};\n\nStorage.prototype.clear = function Storage_clear() {\n    var keys = this._allKeys();\n    for (var i = 0; i < keys.length; i++) this.backend.removeItem(keys[i]);\n};\n\nStorage.prototype.all = function Storage_all() {\n    var keys = this._allKeys(),\n        prefix_length = this.prefix.length + 1,\n        lk,\n        data = {};\n\n    for (var i = 0; i < keys.length; i++) {\n        lk = keys[i].slice(prefix_length);\n        data[lk] = JSON.parse(this.backend.getItem(keys[i]));\n    }\n    return data;\n};\n\nfunction ValueStorage(store, name) {\n    this.store = store;\n    this.name = name;\n}\n\nValueStorage.prototype.get = function ValueStorage_get() {\n    return this.store.get(this.name);\n};\n\nValueStorage.prototype.set = function ValueStorage_get(value) {\n    return this.store.set(this.name, value);\n};\n\nValueStorage.prototype.remove = function ValueStorage_remove() {\n    return this.store.remove(this.name);\n};\n\nvar store = {\n    supported: false,\n\n    local: function (name) {\n        return new Storage(window.localStorage, name);\n    },\n\n    session: function (name) {\n        return new Storage(window.sessionStorage, name);\n    },\n\n    ValueStorage: ValueStorage,\n\n    // Update storage options for a given element.\n    updateOptions: function store_updateOptions(trigger, options) {\n        if (options.store !== \"none\") {\n            if (!trigger.id) {\n                log.warn(\"state persistance requested, but element has no id\");\n                options.store = \"none\";\n            } else if (!store.supported) {\n                log.warn(\n                    \"state persistance requested, but browser does not support webstorage\"\n                );\n                options.store = \"none\";\n            }\n        }\n        return options;\n    },\n};\n\n// Perform the test separately since this may throw a SecurityError as\n// reported in #326\ntry {\n    store.supported = typeof window.sessionStorage !== \"undefined\";\n} catch (e) {\n    // just ignore.\n}\n\nexport default store;\n"],"names":["parser","Parser","add_argument","Base","name","trigger","storage","store","init","$el","opts","options","parse","attr","bind","$","this","isAddedToCart","removeFromCart","addToCart","action","emptyCart","processCart","cartIsEmpty","addClass","parentsUntil","each","index","elem","removeClass","contents","toLowerCase","keep","patterns","cart","get","set","id","removeAttr","push","length","itemIndex","indexOf","splice","cartItems","i","item","data","prop","remove","patternsList","split","patternsDataStr","patternDataId","replace","patternData","form","registry","append","submit","log","logging","Storage","backend","prefix","ValueStorage","prototype","_key","_allKeys","key","keys","prefix_length","slice","value","getItem","JSON","warn","setItem","stringify","removeItem","clear","all","supported","local","window","localStorage","session","sessionStorage","updateOptions","e"],"sourceRoot":""}