"use strict";(self.webpackChunk_patternslib_patterns_dist=self.webpackChunk_patternslib_patterns_dist||[]).push([[3225],{86558:function(t,a,e){e.r(a);var s=e(19755),r=e.n(s),i=e(11191),n=e(82799),o=e(50033),c=e(11815),d=new n.Z("shopping-cart");d.add_argument("action"),d.add_argument("id"),d.add_argument("contents"),d.add_argument("patterns"),a.default=i.Z.extend({name:"shopping-cart",trigger:".pat-shopping-cart",storage:c.Z.local("pat-shopping-cart"),init:function(t,a){var e=d.parse(t,a);"checkbox"==t.attr("type")?t.bind("change",r().proxy((function(){"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)):t.bind("click",r().proxy((function(){"action"in e?"empty"==e.action?this.emptyCart():this.processCart(t,e):"id"in e&&(this.isAddedToCart(e)?this.removeFromCart(t,e):this.addToCart(t,e))}),this)),"action"in e&&(this.cartIsEmpty()?(t.addClass("is-empty"),t.attr("disabled","disabled")):t.addClass("has-items")),"id"in e&&this.isAddedToCart(e)&&(t.addClass("in-cart"),"checkbox"==t.attr("type")&&(t.attr("checked","checked"),t.parentsUntil("lable").each((function(t,a){r()(a).removeClass("unchecked").addClass("checked")})))),"contents"in e&&"keep"==e.contents.toLowerCase()?e.keep=!0:e.keep=!1,"patterns"in e||(e.patterns="")},addToCart:function(t,a){var e=this.storage.get("cart");null===e?(this.storage.set("cart",[a.id]),r()(".pat-shopping-cart.is-empty").each((function(){r()(this).removeClass("is-empty").addClass("has-items"),r()(this).removeAttr("disabled")}))):(e.push(a.id),this.storage.set("cart",e)),t.addClass("in-cart")},removeFromCart:function(t,a){var e=this.storage.get("cart");if(t.removeClass("in-cart"),1===e.length)this.emptyCart();else{var s=e.indexOf(a.id);e.splice(s,1),this.storage.set("cart",e)}},isAddedToCart:function(t){var a=this.storage.get("cart");return null!==a&&a.indexOf(t.id)>-1},emptyCart:function(){r()(".pat-shopping-cart.has-items").each((function(){r()(this).removeClass("has-items"),r()(this).addClass("is-empty")}));for(var t=r()(".pat-shopping-cart.in-cart"),a=0;a<t.length;a++){var e=r()(t[a]),s=d.parse(e,e.data());this.removeFromCart(e,s),"checkbox"==e.attr("type")&&e.prop("checked",!1).trigger("change")}this.storage.remove("cart")},cartIsEmpty:function(){return null===this.storage.get("cart")},processCart:function(t,a){var e=this.storage.get("cart"),s=a.patterns.split(" "),i="";a.keep||this.emptyCart();for(var n=0;n<s.length;n++){var c="pat-shopping-cart-"+s[n].replace("pat-",""),d=t.data(c);i+="data-"+s[n]+'="'+d+'"'}var p=r()('<form action="'+a.action+'" class="'+a.patterns+'" '+i+' method="post"><input name="shopping-cart" type="hidden" value="'+e+'"/></form>');o.Z.scan(p),r()("body").append(p),p.submit()}})}}]);
//# sourceMappingURL=3225.352c980cc642bf3c4808.min.js.map